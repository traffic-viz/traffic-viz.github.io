<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calibration flights &mdash; traffic 2.9.1.dev21 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/jupyter-sphinx.css" type="text/css" />
      <link rel="stylesheet" href="../_static/thebelab.css" type="text/css" />
      <link rel="stylesheet" href="../_static/main_stylesheet.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=ffb97ba4"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="../_static/thebelab-helper.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-lite@4"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Calibration flights with SAVAN trajectories" href="savan.html" />
    <link rel="prev" title="Example gallery" href="../gallery.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            traffic
          </a>
              <div class="version">
                2.9.1.dev21
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide.html">User guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../gallery.html">Example gallery</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../gallery.html#aircraft-trajectory-patterns">Aircraft trajectory patterns</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Calibration flights</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#a-short-introduction-to-radio-navigation">A short introduction to radio-navigation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#a-basic-analysis-of-vor-calibration-trajectories">A basic analysis of VOR calibration trajectories</a></li>
<li class="toctree-l4"><a class="reference internal" href="#equipped-aircraft-for-beacon-calibration">Equipped aircraft for beacon calibration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="savan.html">Calibration flights with SAVAN trajectories</a></li>
<li class="toctree-l3"><a class="reference internal" href="tour_de_france.html">Tour de France 2020</a></li>
<li class="toctree-l3"><a class="reference internal" href="zero_gravity.html">Zero-gravity flights</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gallery.html#air-traffic-control">Air traffic control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery.html#air-traffic-density">Air traffic density</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery.html#planet-earth">Planet Earth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery.html#third-party-examples">Third-party examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications.html">Publications</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">traffic</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../gallery.html">Example gallery</a></li>
      <li class="breadcrumb-item active">Calibration flights</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/gallery/calibration.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div style="display: none"><div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This trick only helps to trigger the proper Javascript library require queries.</span>
<span class="kn">from</span> <span class="nn">ipyleaflet</span> <span class="kn">import</span> <span class="n">Map</span>
<span class="n">Map</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"version_major": 2, "version_minor": 0, "model_id": "c47775e439174713805731be7d1fee8e"}
</script></div>
</div>
</div><script src="../_static/calibration.geojson"></script><section id="calibration-flights">
<h1>Calibration flights<a class="headerlink" href="#calibration-flights" title="Permalink to this heading">ÔÉÅ</a></h1>
<p><em>What is this plane doing?</em></p>
<p>This was my first reaction after hitting on the following trajectory during an
analysis of approaches at Toulouse airport. After exchanges with ATC people, I
learned that these trajectories are flown by small aircraft working at
calibrating landing assistance systems, including ILS and VOR.</p>
<p>These trajectories mostly consist of many low passes over an airport and large
circles or arcs of circle. A small sample of such trajectories is included in
traffic.data.samples, and the following snippet of code will let you explore
those before an attempt of explanation.</p>
Select a different area/airport: <select
    id="city_selector"
    style="-webkit-appearance: none; -moz-appearance: none; -o-appearance: none; appearance: none; padding-top: 0.25em; padding-bottom: 0.25em; background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxOCAxOCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTggMTg7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDpub25lO30KPC9zdHlsZT4KPHBhdGggZD0iTTUuMiw1LjlMOSw5LjdsMy44LTMuOGwxLjIsMS4ybC00LjksNWwtNC45LTVMNS4yLDUuOXoiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTAtMC42aDE4djE4SDBWLTAuNnoiLz4KPC9zdmc+Cg'); background-position-x: 100%; background-position-y: 50%; background-repeat: no-repeat; background-size: 20px auto; box-shadow: none; box-sizing: border-box; border-radius: 0px 0px 0px 0px; height: 28px; width: 15em; line-height: 16px; font-size: 13px;"
    onchange="city_select()"
    >
    <option value="Ajaccio, France">Ajaccio,&nbsp;France</option>
    <option value="Bornholm, Denmark">Bornholm,&nbsp;Denmark</option>
    <option value="Brussels, Belgium">Brussels,&nbsp;Belgium</option>
    <option value="Cardiff, United Kingdom">Cardiff,&nbsp;United&nbsp;Kingdom</option>
    <option value="Funchal, Madeira">Funchal,&nbsp;Madeira</option>
    <option value="Guatemala City">Guatemala&nbsp;City</option>
    <option value="Kingston, Jamaica">Kingston,&nbsp;Jamaica</option>
    <option value="Kiruna, Sweden">Kiruna,&nbsp;Sweden</option>
    <option value="Kota Kinabalu, Malaysia">Kota&nbsp;Kinabalu,&nbsp;Malaysia</option>
    <option value="Lisbon, Portugal">Lisbon,&nbsp;Portugal</option>
    <option value="London, United Kingdom">London,&nbsp;United Kingdom</option>
    <option value="Monastir, Tunisia">Monastir,&nbsp;Tunisia</option>
    <option value="Montr√©al, Canada">Montr√©al,&nbsp;Canada</option>
    <option value="Munich, Germany">Munich,&nbsp;Germany</option>
    <option value="Noum√©a, New Caledonia">Noum√©a,&nbsp;New&nbsp;Caledonia</option>
    <option value="Perth, Australia">Perth,&nbsp;Australia</option>
    <option value="Toulouse, France" selected='selected'>Toulouse,&nbsp;France</option>
    <option value="Vancouver, Canada">Vancouver,&nbsp;Canada</option>
    <option value="Vienna, Austria">Vienna,&nbsp;Austria</option>
</select>

<div id="mymap" style="width: 100%; height: 500px; margin-bottom: 1em; margin-top: 1em"></div>

<script>
    var mymap;
    var mymap_ready = false;

    function city_select() {
        var inp = document.getElementById('city_selector');
        var osm_url = 'https://nominatim.openstreetmap.org/search?format=json&limit=1&q='
        $.getJSON(
            osm_url + inp.value, function(data) {
                $.each(
                    data, function(key, val) {
                        mymap.setView([val.lat, val.lon], 9);
                    }
                )
            }
        )
    };

    setInterval(function() {

    if ((typeof (L) !== "undefined") & ~mymap_ready) {

    mymap = L.map( 'mymap', {
        center: [43.59601301626894, 1.4321018748075245],
        scrollWheelZoom: false,
        zoom: 9
    })

    L.tileLayer('http://stamen-tiles-a.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution:
        'Map tiles by <a href="http://stamen.com/">Stamen Design</a>, '+
        'under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. '+
        'Data by <a href="http://openstreetmap.org/">OpenStreetMap</a>, '+
        'under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.',
        id: 'stamen.terrain'
    }).addTo(mymap);


    L.geoJson(
        calibration_trajectories,
        style={
            color: '#0033FF'
        }
    ).bindPopup(function (layer) {
        return "<b>Trajectory "
          + layer.feature.properties.flight_id
          + "</b><br/> with aircraft "
          + layer.feature.properties.registration
          + " and callsign "
          + layer.feature.properties.callsign;
    }).addTo(mymap);

    mymap_ready = true

  }}, 1000)
</script><p>You may click on trajectories for more information.</p>
<section id="a-short-introduction-to-radio-navigation">
<h2>A short introduction to radio-navigation<a class="headerlink" href="#a-short-introduction-to-radio-navigation" title="Permalink to this heading">ÔÉÅ</a></h2>
<p>A number of navigational systems emerged in the second half of the 20th century,
mainly based on VHF communications. Some of them were designed for surveillance,
like <a class="reference external" href="https://en.wikipedia.org/wiki/Secondary_surveillance_radar">Secondary surveillance radars</a>; other systems
also came to assist pilot in navigation and landing.</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/VHF_omnidirectional_range">VOR</a> (VHF
Omnidirectional Range) ground stations send an omnidirectional master signal
(on a predefined frequency determined for each station) and a second highly
directional signal. Aircraft measure the phase difference between the two
signals, which corresponds to the bearing from the station to the aircraft.¬†<a class="footnote-reference brackets" href="#id3" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p>
<p>Historically, airways were laid out between VORs, which stand at the
intersections between those routes. Advances in GNSS (understand GPS) make these
stations less necessary.</p>
<p>VOR stations often host a <a class="reference external" href="https://en.wikipedia.org/wiki/Distance_measuring_equipment">DME</a> (Distance
Measuring Equipment). The principle is similar to radar ranging, except the
roles of the aircraft and of the ground station are reversed. The aircraft sends
a signal to the DME; the DME repeats the same signal 50 Œºs after reception. When
the aircraft receives a copy of the sent messages, it measures the time of
travel to the DME, subtracts 50 Œºs and divides the results by 2: speed of light
gives an estimation of the distance between the aircraft to the ground station.</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Instrument_landing_system">ILS</a> (Instrument
Landing Systems) consists of two guidance systems: a lateral one (the LOC, for
<em>localizer</em>) and a vertical one (the GS, for <em>glide slope</em>, also <em>glide path</em>).
The localizer usually consists of several pairs of directional antennas placed
beyond the departure end of the runway.¬†<a class="footnote-reference brackets" href="#id4" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></p>
<p>Local authorities define very strict thresholds for accuracy: internal
monitoring shall switch off the system if the accuracy of the signal is not
appropriate. All radio-navigation beacons (including VOR, DME and ILS) are
checked periodically by specially equipped aircraft. In particular, the VOR test
consists of flying around the beacon in circles at defined distances and along
several radials.</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id3" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Decoding VOR signals can be a fun exercice for the amateur software radio developper. (<a class="reference external" href="https://www.radiojitter.com/real-time-decoding-of-vor-using-rtl-sdr/">link</a>)</p>
</aside>
<aside class="footnote brackets" id="id4" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>Check for them next time you drive around an airport!</p>
</aside>
</aside>
</section>
<section id="a-basic-analysis-of-vor-calibration-trajectories">
<h2>A basic analysis of VOR calibration trajectories<a class="headerlink" href="#a-basic-analysis-of-vor-calibration-trajectories" title="Permalink to this heading">ÔÉÅ</a></h2>
<p>We can have a look at the first trajectory in the calibration dataset. The
aircraft takes off from Ajaccio airport before flying concentric circles and
radials. There must be a VOR around, we can search in the navaid database:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">traffic.data.samples.calibration</span> <span class="kn">import</span> <span class="n">ajaccio</span>
<span class="kn">from</span> <span class="nn">traffic.data</span> <span class="kn">import</span> <span class="n">navaids</span>

<span class="n">navaids</span><span class="o">.</span><span class="n">extent</span><span class="p">(</span><span class="n">ajaccio</span><span class="p">)</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;type == &quot;VOR&quot;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>type</th>
      <th>latitude</th>
      <th>longitude</th>
      <th>altitude</th>
      <th>frequency</th>
      <th>magnetic_variation</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>272196</th>
      <td>AJO</td>
      <td>VOR</td>
      <td>41.770528</td>
      <td>8.774667</td>
      <td>2142.0</td>
      <td>114.80</td>
      <td>2.0</td>
      <td>AJACCIO VOR-DME</td>
    </tr>
    <tr>
      <th>272565</th>
      <td>BTA</td>
      <td>VOR</td>
      <td>42.573583</td>
      <td>9.474833</td>
      <td>36.0</td>
      <td>114.15</td>
      <td>2.0</td>
      <td>BASTIA PORETTA VOR-DME</td>
    </tr>
    <tr>
      <th>273152</th>
      <td>FGI</td>
      <td>VOR</td>
      <td>41.502194</td>
      <td>9.083417</td>
      <td>144.0</td>
      <td>116.70</td>
      <td>2.0</td>
      <td>FIGARI VOR-DME</td>
    </tr>
    <tr>
      <th>275091</th>
      <td>SME</td>
      <td>VOR</td>
      <td>40.890056</td>
      <td>9.501278</td>
      <td>59.0</td>
      <td>113.90</td>
      <td>1.0</td>
      <td>SMERALDA OLBIA VOR-DME</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Next step is to compute for each point the distance and bearing from the VOR to
each point of the trajectory. The parts of the trajectory that are of interest
are the ones with little to no variation in the distance (circles) and in the
bearing (radials) to the VOR.</p>
<p>Then, we can write a simple .query() followed by a .split() method to select all
segments with a constant bearing and distance with respect to the selected VOR.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>
<span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">or_</span>

<span class="n">vor</span> <span class="o">=</span> <span class="n">navaids</span><span class="o">.</span><span class="n">extent</span><span class="p">(</span><span class="n">ajaccio</span><span class="p">)[</span><span class="s1">&#39;AJO&#39;</span><span class="p">]</span>

<span class="n">ajaccio</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">ajaccio</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">vor</span><span class="p">)</span>  <span class="c1"># add a distance column (in nm) w.r.t the VOR</span>
    <span class="o">.</span><span class="n">bearing</span><span class="p">(</span><span class="n">vor</span><span class="p">)</span>  <span class="c1"># add a bearing column w.r.t the VOR</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span>
        <span class="n">distance_diff</span><span class="o">=</span><span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="n">df</span><span class="o">.</span><span class="n">distance</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">abs</span><span class="p">(),</span>  <span class="c1"># large circles</span>
        <span class="n">bearing_diff</span><span class="o">=</span><span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="n">df</span><span class="o">.</span><span class="n">bearing</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">abs</span><span class="p">(),</span>  <span class="c1"># long radials</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">constant_distance</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
    <span class="n">segment</span> <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">ajaccio</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;distance_diff &lt; .02&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;1T&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">segment</span><span class="o">.</span><span class="n">longer_than</span><span class="p">(</span><span class="s1">&#39;5 minutes&#39;</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># trick to display many trajectories</span>
<span class="n">reduce</span><span class="p">(</span><span class="n">or_</span><span class="p">,</span> <span class="n">constant_distance</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<div style='
    margin: 1ex;
    min-width: 250px;
    max-width: 300px;
    display: inline-block;
    vertical-align: top;'>
    <h4><b>Flight</b></h4><ul><li><b>callsign:</b> CALIBRA   </li><li><b>aircraft:</b> <code>39b415</code> ¬∑ üá´üá∑ F-HNAV (BE20)</li><li><b>start:</b> 2018-01-12 09:16:15+00:00</li><li><b>stop:</b> 2018-01-12 09:36:35+00:00</li><li><b>duration:</b> 0 days 00:20:20</li><li><b>sampling rate:</b> 7 second(s)</li></ul><div style="white-space: nowrap"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="300" height="300" viewBox="-8917.106694419626 -8784.236230681421 17836.16840465033 17568.598197587646" preserveAspectRatio="xMinYMin meet"><g transform="matrix(1,0,0,-1,0,0.12573622480340418)"><polyline fill="none" stroke="#66cc99" stroke-width="118.90778936433553" points="-4915.835663234422,6528.91031796594 -5149.367890321677,6333.313911459971 -5382.912900703632,6137.725192275209 -5834.434423570251,5731.341481975622 -6214.748463702127,5291.492193238457 -6571.612334788154,4832.093501109111 -7102.47629991749,4131.806929244514 -7825.410329619209,2836.8797708628617 -7985.293816220163,2268.492212479164 -8058.281712743019,1967.2984995765087 -8131.275731087854,1666.1056702022527 -8256.507864617763,1127.3412864067136 -8141.031971538606,-492.910788598664 -8102.528191603532,-1032.993479965549 -7544.600328332089,-2951.114640605522 -6922.430526028692,-3932.9214638265516 -6264.311119729965,-4771.6482902309635 -5995.224346981013,-5111.635959617729 -5596.961427244776,-5603.101081372885 -4338.021906408475,-6827.941963561035 -4096.2032231219855,-6971.084036449463 -3854.374870600751,-7114.217904697272 -2328.8451235355533,-7647.445661504263 -1756.2185381508702,-7825.539141814145 -1476.344674712144,-7909.735924311525 -1196.4642308040407,-7993.921753513346 -457.20885264097444,-8115.6259514317535 -231.33074405085623,-8119.635239207099 -5.452382943415738,-8123.6374008795565 1061.493189532448,-8022.320764926034 1299.0170368853796,-7993.459611467276 1740.6775761486936,-7927.280728323921 2280.776978759932,-7781.852801094304 2711.406018002354,-7657.529207715759 2918.7211408726193,-7587.752826138185 3126.0322243677338,-7517.970432760948 3574.5682313886814,-7311.397006312553 5586.001598612103,-5575.02179710478 5870.675170513182,-5284.659757744217 6155.325642247318,-4994.286252847288 7534.025805975545,-2783.301335403411 7703.301985457594,-2323.4084568863846 7782.777741949756,-2095.7984364352214 7862.248426368427,-1868.187449019831 8036.7334021744655,-1123.1667152092366 8076.237035906305,-867.2196834519859 8115.737821977583,-611.2723291481453 8148.842620047055,-108.31460527792855 8135.807919772908,459.0110898439182 8069.792634184969,974.6301633407815 7948.676587282559,1560.0513364363592 7882.053815198829,1818.6023842400484 7815.435841300821,2077.154154997044 7671.475634294211,2609.575912340045 6992.189795974683,4442.082440075447 6851.854266449022,4687.077429092352 6548.903027445787,5131.6278986023035 5491.85608744735,6423.480108095516 5260.832369328275,6588.078656130258 5029.8192951313995,6752.68471190105 4282.857319412886,7169.155011565211 2748.011249114712,7755.627676028107 2212.0674289434783,7931.265756467399 1938.133505768095,7989.442516179453 1664.2040472960132,8047.629784790802 1119.1912939799474,8106.835113824498 559.988822031732,8123.76313710436 -956.5618768551864,7872.147869533791 -1462.102514721903,7788.347680507365 -2475.440600804115,7442.8654990438245 -2934.0878918942108,7285.430617504647 -3785.273783450986,6904.471702125473 -4054.998325027321,6752.064963568526 -4558.231077079974,6365.622465513488 -5019.974940044355,5984.9619561420595 -6187.740297211958,4865.460509209702 -6379.776514700867,4619.665380633455 -6735.922140349334,4087.4129644860595 -7673.864046277038,2397.7691170184958 -7736.958355819516,2084.954722194233 -7800.058157527642,1772.1410331628063 -7728.233177247573,-590.9316579131587 -7686.320338101098,-1149.4308754656329 -7104.642122628208,-3740.6502815016465 -6956.135605366557,-4030.4067005631678 -6575.102812158744,-4573.890384112178 -5230.513066319429,-5975.788887729973 -4988.803451679426,-6208.537467460419 -4747.07811278023,-6441.277791194881 -3716.2412845762783,-7171.0464949294455 -2498.9742015540637,-7626.618674838385 -2192.5270617914694,-7726.068960477467 -1886.071411972162,-7825.506111312713 -1262.632661167034,-7947.706336162405 -654.7351425024663,-8029.0890957138145 -26.013082090336965,-8069.880728726615 1055.6604923890109,-7982.9482230874055 1596.4874306561599,-7939.420684338123 2413.729798159162,-7843.840395571519 2690.1477841780957,-7791.817824816005 3221.3674949193937,-7586.123632847027 3746.0362636020295,-7326.525594667455 4782.120656736222,-6512.060157084469 4976.70273344104,-6339.494817412945 5336.642560345488,-6012.140800124672 5734.958074071323,-5639.42211717917 6003.181804799149,-5372.916759522713 6271.385551944415,-5106.401229534237 6589.841036246836,-4676.836978569078 6791.454425996954,-4340.667334304759 6993.048849193071,-4004.491820758926 7247.657376215888,-3544.0825331971832 7487.659633622261,-3068.1295224748515 7700.028735066129,-2605.1928654803933 7799.828699571681,-2363.3440839519753 7899.621900201377,-2121.493814985973 8258.462880428837,-565.7928485959245 8098.301858924657,584.1211526993327 8044.92620363959,967.4270766526445 7991.556224311902,1350.733626612592 7876.82181835115,1889.5143667166685 7760.849282737085,2283.0172747609918 7644.8894675140145,2676.5222988157457 7463.8251268391205,3188.1391078897664 7224.321813818123,3741.2415964069437 6945.653683838062,4273.211117961512 6639.167943387832,4740.634450937918 6466.632922792216,4961.838317390915 6294.108573859819,5183.046420007248 5881.114207825959,5644.96736388579 5460.2405826514005,6050.927154589994 5030.228536137247,6407.368269819431 4568.373944119716,6743.155952847143 4321.5170545839665,6905.8866275159035 4074.671410701772,7068.625868135529 3598.410532738072,7321.276773798769 3022.768586365489,7554.923760846393 2620.886019232991,7656.449764368912 2219.0148830564735,7757.998389330766 1104.2727745875306,7905.240330087025 812.0371381048285,7928.470343519284 519.8034040364845,7951.712312417414 -37.250243489143344,7987.791319602595 -606.595268316971,7966.158283427376 -1146.0557986274182,7869.1490931601975 -1929.6407998445427,7606.24803464905 -2187.942925903278,7513.967632916431 -2727.3315887488247,7315.892981777916 -3111.061499367484,7173.657882539914 -3880.4597584811945,6845.877770031002 -4935.049428518605,6133.181181037428 -5320.9837242220765,5741.159141485178 -5507.779502208584,5541.930223399591 -5694.585691002154,5342.706245443239 -6061.083135987472,4944.711327242726 -6741.20146971282,4040.768688331051 -6985.930681464872,3534.304135161785 -7103.879606062959,3263.2440824240807 -7221.8374573734545,2992.1860857449196 -7438.210212434081,2485.264874617533 -7763.136466970964,1401.3516822846386 -7822.390970014876,810.3061287307283 -7837.492629053865,533.8716811047093 -7852.595432159162,257.4373845622037 -7879.1640376904,-311.9840350202254 -7699.563424113309,-1245.6466121840194 -7609.745435599027,-1712.4756867367287 -7519.915659300691,-2179.3032816411237 -7039.051140517657,-3704.062568141757 -6533.5811966945985,-4660.450482792301 -5598.570536015599,-5958.12834275769 -5374.127663453762,-6172.272565764879" opacity="0.8" /></g></svg></div>
</div>

<div style='
    margin: 1ex;
    min-width: 250px;
    max-width: 300px;
    display: inline-block;
    vertical-align: top;'>
    <h4><b>Flight</b></h4><ul><li><b>callsign:</b> CALIBRA   </li><li><b>aircraft:</b> <code>39b415</code> ¬∑ üá´üá∑ F-HNAV (BE20)</li><li><b>start:</b> 2018-01-12 09:49:05+00:00</li><li><b>stop:</b> 2018-01-12 10:03:30+00:00</li><li><b>duration:</b> 0 days 00:14:25</li><li><b>sampling rate:</b> 6 second(s)</li></ul><div style="white-space: nowrap"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="300" height="300" viewBox="-26380.74602086554 -30857.425336229076 52869.37586649071 61741.63363876407" preserveAspectRatio="xMinYMin meet"><g transform="matrix(1,0,0,-1,0,26.78296630591649)"><polyline fill="none" stroke="#66cc99" stroke-width="411.61089092509377" points="24201.90267381909,-26114.457859691804 23731.917705562995,-26321.54775434088 23256.49192379919,-26533.455625027236 22315.537951881666,-26943.373935925494 20901.935425235435,-27454.736602379653 20419.394697693337,-27570.07358240633 17910.41669198525,-27921.767920012975 17408.59192359233,-27992.00174397206 16906.75744906951,-28062.20055173519 16404.913262506077,-28132.364342310997 15903.059357991444,-28202.493114688295 15401.195754679771,-28272.586867813407 14899.322446683342,-28342.64561178123 14397.439436400167,-28412.669323371236 13895.546717943089,-28482.658012674074 13393.644310467309,-28552.61167864315 9869.155592304962,-28570.698164423 9353.71655440341,-28520.590641054867 8838.284745793902,-28470.446196333054 8322.860169095049,-28420.2648088229 7807.442826979975,-28370.046501512672 7292.032713726426,-28319.791264100702 6776.629848680808,-28269.49908623009 6261.234226156024,-28219.169990914597 5641.242535708845,-28149.241241593816 5021.262943270936,-28079.259052111065 1497.2279198315875,-27526.485031123666 1144.7088501057456,-27423.594366354493 243.55094038269894,-27117.813693254157 -190.4448533987822,-26941.965381337934 -624.4194351974904,-26766.090805321754 -1058.3727867159666,-26590.189989461414 -1508.0607991751547,-26399.247583779903 -1957.7249381985507,-26208.27698355958 -2441.287731626146,-25990.694846482664 -2924.8212719379067,-25773.080094553927 -3408.3255569273742,-25555.432730971213 -3891.8005843882925,-25337.752758933795 -4553.889187498115,-25033.16083098719 -5070.247179101054,-24797.249297306516 -5586.571304131941,-24561.300567037593 -6551.47794505447,-24085.133054997023 -6976.23519482467,-23811.886477560238 -7400.960163440616,-23538.61465945427 -7825.652849370304,-23265.317581819174 -8841.65068988737,-22505.682500056577 -9306.195355376776,-22153.022185563557 -9771.111807630812,-21800.331023169296 -10235.982629492952,-21447.609531745395 -10529.893354535212,-21226.277484580816 -10823.785975426836,-21004.933317229963 -11338.993390986067,-20617.522616796392 -11854.145253127193,-20230.074675328993 -12323.649261531547,-19859.105450607152 -13608.127411777079,-18759.68640456455 -13981.967027093851,-18345.916707559263 -14355.76352806966,-17932.127215301145 -14644.170204667464,-17598.95942226441 -14932.550090853698,-17265.779829914005 -15689.345112120634,-16304.419712100673 -16067.666511809704,-15823.709073504948 -16445.93716938196,-15342.978057385795 -16824.157083722526,-14862.22667047881 -17202.326253717554,-14381.454919478516 -17580.444678254116,-13900.662811109178 -17958.51235622012,-13419.850352085143 -18145.170798130974,-13129.552703893482 -18331.814097929582,-12839.250043884394 -18678.97173541528,-12294.35006929048 -19031.39109993991,-11741.755043730951 -19373.37844494096,-11204.49742960127 -19715.235091763025,-10638.345732218164 -19868.816301363742,-10343.26074910376 -20022.384823039913,-10048.172320934022 -20297.42575313389,-9437.30626694698 -20545.94349970577,-8862.935044801128 -20800.827921733766,-8256.770680142647 -21053.323597980012,-7646.2718473048 -21177.49451221169,-7348.466488911472 -21301.655050032296,-7050.658826215565 -21549.702241122337,-6485.136783996193 -21818.21270168449,-5869.118283884758 -22195.016353983512,-4993.520912181683 -22318.877204505665,-4693.140534746905 -22542.777524579946,-4073.899280476676 -22720.385272630592,-3441.1356657716888 -22889.63014569192,-2780.5153055416554 -23043.569694426766,-2133.489771214505 -23117.890936416105,-1817.9809908986724 -23192.20554846274,-1502.471279272226 -23330.62683202475,-912.2446514149835 -23461.000744537967,-260.6197136219568 -23559.79151345178,422.2260298107713 -23640.983203949458,1061.4765504638203 -23678.00554470373,1378.0917200000122 -23715.024521233394,1694.7072350101564 -23792.494370156244,2368.7133569165744 -23873.453516107875,3014.6319853596697 -23934.146235332562,3497.877908531304 -23994.8305483681,3981.1246928987925 -24066.583631603102,4633.014129605015 -24089.147123758143,5293.18065179944 -24094.018849059463,5946.068756041956 -24077.662468665607,6388.69619956852 -24061.30792562256,6831.323957950124 -24044.955219939726,7273.952029041178 -24028.60435162553,7716.5804107017575 -24012.25532068933,8159.209100789105 -23988.95336321814,8836.663010890024 -23974.385777916184,9314.552338454063 -23959.819923210922,9792.442002661855 -23890.161809653582,10468.409769660298 -23810.11444541748,11124.01816209345 -23734.861964921332,11741.102128025357 -23695.202904839505,12062.799795867086 -23655.547315702028,12384.49781571867 -23576.760348303855,13023.231600026125 -23480.35087714491,13619.479514573088 -23328.803600196272,14216.770838631137 -23019.915108369958,15132.05562959329 -22914.603139250026,15432.777342698148 -22543.287114557563,16456.123453598342 -22386.45110634809,16890.366063534264 -22167.406445738416,17486.250977356794 -21957.902967827642,18068.62140954869 -21728.845382191907,18705.141982888592 -21514.994846890666,19293.84387643872 -21412.41825021464,19595.43004875924 -21309.850238437666,19897.017792634382 -20557.67324830666,22040.509900243032 -19998.369554885296,22954.131934635025 -19718.771153146008,23410.95968857671 -19439.208382000554,23867.798594399268 -19159.681241908103,24324.648647645823 -18880.189733327068,24781.509843863743 -18600.733856715407,25238.38217858907 -18321.313612530874,25695.265647359258 -18053.63948117605,26103.66491364392 -17785.99587610529,26512.074369167563 -17456.405797286447,27023.084603999145 -17110.89580358417,27554.84263538173 -16927.619289143793,27826.034513669794 -16744.356662045124,28097.2311626379 -16351.279227713683,28597.481130728916" opacity="0.8" /></g></svg></div>
</div>
</div></div>
</div>
<p>We have all we need to enhance the interesting parts of the trajectory now:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="kn">from</span> <span class="nn">cartes.crs</span> <span class="kn">import</span> <span class="n">Lambert93</span><span class="p">,</span> <span class="n">EuroPP</span>
<span class="kn">from</span> <span class="nn">cartes.utils.features</span> <span class="kn">import</span> <span class="n">countries</span>

<span class="kn">from</span> <span class="nn">traffic.data</span> <span class="kn">import</span> <span class="n">airports</span>

<span class="n">point_params</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">zorder</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">text_kw</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">fontname</span><span class="o">=</span><span class="s2">&quot;Ubuntu&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">))</span>
<span class="n">box_params</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;round&quot;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;lightpink&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="k">with</span> <span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">context</span><span class="p">(</span><span class="s2">&quot;traffic&quot;</span><span class="p">):</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">EuroPP</span><span class="p">()))</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">countries</span><span class="p">())</span>

    <span class="c1"># airport information</span>
    <span class="n">airports</span><span class="p">[</span><span class="s2">&quot;LFKJ&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="o">**</span><span class="n">point_params</span><span class="p">)</span>

    <span class="c1"># VOR information</span>
    <span class="n">shift_vor</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">units</span><span class="o">=</span><span class="s2">&quot;dots&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">vor</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;h&quot;</span><span class="p">,</span> <span class="n">shift</span><span class="o">=</span><span class="n">shift_vor</span><span class="p">,</span> <span class="o">**</span><span class="n">point_params</span><span class="p">)</span>

    <span class="c1"># full trajectory in dashed lines</span>
    <span class="n">ajaccio</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#aaaaaa&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">)</span>

    <span class="c1"># constant distance segments</span>
    <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">ajaccio</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;distance_diff &lt; .02&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;1 minute&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">segment</span><span class="o">.</span><span class="n">longer_than</span><span class="p">(</span><span class="s2">&quot;3 minutes&quot;</span><span class="p">):</span>
            <span class="n">segment</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;crimson&quot;</span><span class="p">)</span>

            <span class="c1"># an annotation with the radius of the circle</span>
            <span class="n">distance_vor</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">distance</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
            <span class="n">segment</span><span class="o">.</span><span class="n">at</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
                <span class="n">ax</span><span class="p">,</span>
                <span class="n">alpha</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>  <span class="c1"># We don&#39;t need the point, only the text</span>
                <span class="n">text_kw</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">distance_vor</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> nm&quot;</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="n">box_params</span><span class="p">),</span>
            <span class="p">)</span>

    <span class="c1"># constant bearing segments</span>
    <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">ajaccio</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;bearing_diff &lt; .01&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;1 minute&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">segment</span><span class="o">.</span><span class="n">longer_than</span><span class="p">(</span><span class="s2">&quot;3 minutes&quot;</span><span class="p">):</span>
            <span class="n">segment</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;forestgreen&quot;</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_extent</span><span class="p">((</span><span class="mf">7.6</span><span class="p">,</span> <span class="mf">9.9</span><span class="p">,</span> <span class="mf">41.2</span><span class="p">,</span> <span class="mf">43.3</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s2">&quot;geo&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/calibration_3_0.png" src="../_images/calibration_3_0.png" />
</div>
</div>
<p>The following map displays the result of a similar processing on the other VOR
calibration trajectories from the sample dataset. <a class="footnote-reference brackets" href="#id6" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a></p>
Select a different VOR: <select
    id="vor_selector"
    style="-webkit-appearance: none; -moz-appearance: none; -o-appearance: none; appearance: none; padding-top: 0.25em; padding-bottom: 0.25em; background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxOCAxOCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTggMTg7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDpub25lO30KPC9zdHlsZT4KPHBhdGggZD0iTTUuMiw1LjlMOSw5LjdsMy44LTMuOGwxLjIsMS4ybC00LjksNWwtNC45LTVMNS4yLDUuOXoiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTAtMC42aDE4djE4SDBWLTAuNnoiLz4KPC9zdmc+Cg'); background-position-x: 100%; background-position-y: 50%; background-repeat: no-repeat; background-size: 20px auto; box-shadow: none; box-sizing: border-box; border-radius: 0px 0px 0px 0px; height: 28px; width: 15em; line-height: 16px; font-size: 13px;"
    onchange="vor_select()"
    >
    <option value="41.770528 8.774667 8 ajo">Ajaccio VOR-DME</option>
    <option value="50.902222 4.538056 9 bub">Brussels VOR-DME</option>
    <option value="32.747039 -16.705686 9 fun">Madeira VOR-DME</option>
    <option value="-22.315389 166.473167 9 mga">Ouere VOR-DME</option>
    <option value="-31.673889 116.017222 9 pea">Pearce TACAN</option>
    <option value="15.00863889 -90.47033333 9 rab">Rabinal VOR-DME</option>
</select>

<div id="vormap" style="width: 100%; height: 500px; margin-bottom: 1em; margin-top: 1em"></div>

<script>

    var vormap;
    var vormap_ready = false;
    var ajo, bub, fun, mga, pea, rab;

    function vor_select() {
        var inp = document.getElementById('vor_selector');
        var tab = inp.value.split(' ');
        vormap.setView([tab[0], tab[1]], tab[2]);
        eval(tab[3]).openPopup();
    };

    /* delay the creation of the map after the whole page has been loaded */
    setInterval(function() {

    if ((typeof (L) !== "undefined") & ~vormap_ready) {
    vormap = L.map( 'vormap', {
        center: [41.770528, 8.774667],
        scrollWheelZoom: false,
        zoom: 8
    })

    L.tileLayer('http://stamen-tiles-a.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution:
        'Map tiles by <a href="http://stamen.com/">Stamen Design</a>, '+
        'under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. '+
        'Data by <a href="http://openstreetmap.org/">OpenStreetMap</a>, '+
        'under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.',
        id: 'stamen.terrain'
    }).addTo(vormap);


    L.geoJson(
        calibration_trajectories,
        style={
            color: '#FED976',
            weight: 2
        }
    ).bindPopup(function (layer) {
        return "<b>Trajectory "
          + layer.feature.properties.flight_id
          + "</b><br/> with aircraft "
          + layer.feature.properties.registration
          + " and callsign "
          + layer.feature.properties.callsign;
    }).addTo(vormap);

    L.geoJson(
        calibration_segments,
        {
           style: function (feature) {
               return {
                   color: feature.properties.color,
                   weight: 2
              };
           }
        }
    ).addTo(vormap);

    ajo = L.marker([41.770528, 8.774667]);
    ajo.addTo(vormap);
    ajo.bindPopup('<b>Ajaccio VOR-DME</b>')
    bub = L.marker([50.902222, 4.538056]);
    bub.addTo(vormap);
    bub.bindPopup('<b>Brussels VOR-DME</b>')
    fun = L.marker([32.747039, -16.705686]);
    fun.addTo(vormap);
    fun.bindPopup('<b>Madeira VOR-DME</b>')
    mga = L.marker([-22.315389, 166.473167]);
    mga.addTo(vormap);
    mga.bindPopup('<b>Ouere VOR-DME</b>')
    pea = L.marker([-31.673889, 116.017222]);
    pea.addTo(vormap);
    pea.bindPopup('<b>Pearce TACAN</b>')
    rab = L.marker([15.00863889, -90.47033333]);
    rab.addTo(vormap);
    rab.bindPopup('<b>Rabinal VOR-DME</b>')

    ajo.openPopup();
    vormap_ready = true;

  }})

</script><aside class="footnote-list brackets">
<aside class="footnote brackets" id="id6" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">3</a><span class="fn-bracket">]</span></span>
<p>Time, distance and bearing thresholds may need further ajustments for a proper picture. Note the kiruna14 seems to circle around a position that is not referenced in the database. Any help or insight welcome!</p>
</aside>
</aside>
</section>
<section id="equipped-aircraft-for-beacon-calibration">
<h2>Equipped aircraft for beacon calibration<a class="headerlink" href="#equipped-aircraft-for-beacon-calibration" title="Permalink to this heading">ÔÉÅ</a></h2>
<p>This list only contains the equipped aircraft for the calibration in the sample
dataset. Apart from F-HNAV, registration numbers were found on social networks.
Two of the aircraft registrations were not in the provided database at the time
of the writing, so we added them manually.</p>
<blockquote class="twitter-tweet" style="width: 100%"><p lang="en" dir="ltr">Ever seen a Runway Calibration ? <a href="https://twitter.com/Beechcraft?ref_src=twsrc%5Etfw">@Beechcraft</a> <a href="https://twitter.com/hashtag/B300?src=hash&amp;ref_src=twsrc%5Etfw">#B300</a> VH-FIZ was out calibrating RWY16L <a href="https://twitter.com/SydneyAirport?ref_src=twsrc%5Etfw">@SydneyAirport</a> this morning, making a number of approaches to calibrate and certify ILS precision üíØ. The orbits in the track are done to fit in with regular arrivals and departures ‚úàÔ∏èüíôüì∑ <a href="https://t.co/CRkXfsscHa">pic.twitter.com/CRkXfsscHa</a></p>&mdash; 16Right Media (@www16Right) <a href="https://twitter.com/www16Right/status/982854657151197185?ref_src=twsrc%5Etfw">April 8, 2018</a></blockquote>
<!--<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>--><div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">traffic.core</span> <span class="kn">import</span> <span class="n">Traffic</span>
<span class="kn">from</span> <span class="nn">traffic.data</span> <span class="kn">import</span> <span class="n">aircraft</span>
<span class="kn">from</span> <span class="nn">traffic.data.samples</span> <span class="kn">import</span> <span class="n">calibration</span>

<span class="p">(</span>
    <span class="n">Traffic</span><span class="o">.</span><span class="n">from_flights</span><span class="p">(</span>
        <span class="nb">getattr</span><span class="p">(</span><span class="n">calibration</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span>
            <span class="c1"># create a flight_id which includes the date of the flight</span>
            <span class="n">flight_id</span><span class="o">=</span><span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="si">:</span><span class="s2">%Y-%m-%d</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">calibration</span><span class="o">.</span><span class="n">__all__</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">summary</span><span class="p">([</span><span class="s2">&quot;flight_id&quot;</span><span class="p">,</span> <span class="s2">&quot;icao24&quot;</span><span class="p">,</span> <span class="s2">&quot;start&quot;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">eval</span><span class="p">()</span>
    <span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">aircraft</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
    <span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s2">&quot;registration&quot;</span><span class="p">,</span> <span class="s2">&quot;start&quot;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;registration&quot;</span><span class="p">,</span> <span class="s2">&quot;typecode&quot;</span><span class="p">,</span> <span class="s2">&quot;icao24&quot;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">flight_id</span><span class="p">))</span>
    <span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th>0</th>
    </tr>
    <tr>
      <th>registration</th>
      <th>typecode</th>
      <th>icao24</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>9M-FCL</th>
      <th>LJ60</th>
      <th>750093</th>
      <td>kota_kinabalu (2017-03-08)</td>
    </tr>
    <tr>
      <th>C-GFIO</th>
      <th>CRJ2</th>
      <th>c052bb</th>
      <td>vancouver (2018-10-06)</td>
    </tr>
    <tr>
      <th>C-GNVC</th>
      <th>CRJ2</th>
      <th>c06921</th>
      <td>montreal (2018-12-11)</td>
    </tr>
    <tr>
      <th>D-CFMD</th>
      <th>B350</th>
      <th>3cce6f</th>
      <td>vienna (2018-11-20), munich (2019-03-04)</td>
    </tr>
    <tr>
      <th>F-HNAV</th>
      <th>BE20</th>
      <th>39b415</th>
      <td>toulouse (2017-06-16), ajaccio (2018-01-12), m...</td>
    </tr>
    <tr>
      <th>G-GBAS</th>
      <th>DA62</th>
      <th>4070f4</th>
      <td>london_heathrow (2018-01-12), lisbon (2018-11-...</td>
    </tr>
    <tr>
      <th>G-TACN</th>
      <th>DA62</th>
      <th>4076f1</th>
      <td>cardiff (2019-02-15), london_gatwick (2019-02-28)</td>
    </tr>
    <tr>
      <th>SE-LKY</th>
      <th>BE20</th>
      <th>4ab179</th>
      <td>bornholm (2018-11-26), kiruna (2019-01-30)</td>
    </tr>
    <tr>
      <th>VH-FIZ</th>
      <th>B350</th>
      <th>7c1a89</th>
      <td>noumea (2017-11-05), sydney (2018-11-10), pert...</td>
    </tr>
    <tr>
      <th>YS-111-N</th>
      <th>BE20</th>
      <th>0b206f</th>
      <td>guatemala (2018-03-26), kingston (2018-06-26)</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div>
<a class="reference internal image-reference" href="https://cdn.jetphotos.com/full/6/55737_1538774410.jpg" target='_blank'><img alt="F-HNAV" class="align-center" src="https://cdn.jetphotos.com/full/6/55533_1526410235.jpg" title="¬© Kris Van Craenenbroeck | Jetphotos" style="max-height: 200px; float: left; padding: 20px"></a>
<a class="reference internal image-reference" href="https://www.jetphotos.com/photo/9094827" target='_blank'><img alt="C-GFIO" class="align-center" src="https://cdn.jetphotos.com/full/6/55737_1538774410.jpg" title="¬© Keeper1 | Jetphotos" style="max-height: 200px; display: block; padding: 20px"></a>
</div></section>
</section>


<script type="application/vnd.jupyter.widget-state+json">
{"state": {"c4885b41930047838af99b6fca2a5b23": {"model_name": "LeafletMapStyleModel", "model_module": "jupyter-leaflet", "model_module_version": "^0.17", "state": {"_model_module": "jupyter-leaflet", "_model_module_version": "^0.17", "_model_name": "LeafletMapStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "cursor": "grab"}}, "64f0529cbb0e4fefa6f51486fa383fd4": {"model_name": "LeafletMapStyleModel", "model_module": "jupyter-leaflet", "model_module_version": "^0.17", "state": {"_model_module": "jupyter-leaflet", "_model_module_version": "^0.17", "_model_name": "LeafletMapStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "cursor": "move"}}, "c15a3d801e1547c7812d0443c9a6eaa1": {"model_name": "LeafletTileLayerModel", "model_module": "jupyter-leaflet", "model_module_version": "^0.17", "state": {"_model_module": "jupyter-leaflet", "_model_module_version": "^0.17", "_model_name": "LeafletTileLayerModel", "_view_count": null, "_view_module": "jupyter-leaflet", "_view_module_version": "^0.17", "_view_name": "LeafletTileLayerView", "attribution": "&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors", "base": true, "bottom": true, "bounds": null, "detect_retina": false, "loading": false, "max_native_zoom": null, "max_zoom": 19, "min_native_zoom": null, "min_zoom": 1, "name": "OpenStreetMap.Mapnik", "no_wrap": false, "opacity": 1.0, "options": ["attribution", "bounds", "detect_retina", "max_native_zoom", "max_zoom", "min_native_zoom", "min_zoom", "no_wrap", "tile_size", "tms", "zoom_offset"], "pane": "", "popup": null, "popup_max_height": null, "popup_max_width": 300, "popup_min_width": 50, "show_loading": false, "subitems": [], "tile_size": 256, "tms": false, "url": "https://tile.openstreetmap.org/{z}/{x}/{y}.png", "visible": true, "zoom_offset": 0}}, "8c5aa457daea4872bc7e13aba75cce11": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "5c84874881bc470fa6304c4217d802a6": {"model_name": "LeafletMapStyleModel", "model_module": "jupyter-leaflet", "model_module_version": "^0.17", "state": {"_model_module": "jupyter-leaflet", "_model_module_version": "^0.17", "_model_name": "LeafletMapStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "cursor": "grab"}}, "c47775e439174713805731be7d1fee8e": {"model_name": "LeafletMapModel", "model_module": "jupyter-leaflet", "model_module_version": "^0.17", "state": {"_dom_classes": [], "_model_module": "jupyter-leaflet", "_model_module_version": "^0.17", "_model_name": "LeafletMapModel", "_view_count": null, "_view_module": "jupyter-leaflet", "_view_module_version": "^0.17", "_view_name": "LeafletMapView", "bottom": 0.0, "bounce_at_zoom_limits": true, "box_zoom": true, "center": [0.0, 0.0], "close_popup_on_click": true, "controls": ["IPY_MODEL_6f551ba6d30845dcabacd4ad15da536c", "IPY_MODEL_13a45729c25e4ebba0c58556a64bf7db"], "crs": {"name": "EPSG3857", "custom": false}, "default_style": "IPY_MODEL_c4885b41930047838af99b6fca2a5b23", "double_click_zoom": true, "dragging": true, "dragging_style": "IPY_MODEL_64f0529cbb0e4fefa6f51486fa383fd4", "east": 0.0, "fullscreen": false, "inertia": true, "inertia_deceleration": 3000, "inertia_max_speed": 1500, "interpolation": "bilinear", "keyboard": true, "keyboard_pan_offset": 80, "keyboard_zoom_offset": 1, "layers": ["IPY_MODEL_c15a3d801e1547c7812d0443c9a6eaa1"], "layout": "IPY_MODEL_8c5aa457daea4872bc7e13aba75cce11", "left": 9007199254740991.0, "max_zoom": null, "min_zoom": null, "modisdate": "2023-11-09", "north": 0.0, "options": ["bounce_at_zoom_limits", "box_zoom", "center", "close_popup_on_click", "double_click_zoom", "dragging", "fullscreen", "inertia", "inertia_deceleration", "inertia_max_speed", "interpolation", "keyboard", "keyboard_pan_offset", "keyboard_zoom_offset", "max_zoom", "min_zoom", "prefer_canvas", "scroll_wheel_zoom", "tap", "tap_tolerance", "touch_zoom", "world_copy_jump", "zoom", "zoom_animation_threshold", "zoom_delta", "zoom_snap"], "panes": {}, "prefer_canvas": false, "right": 0.0, "scroll_wheel_zoom": false, "south": 0.0, "style": "IPY_MODEL_5c84874881bc470fa6304c4217d802a6", "tabbable": null, "tap": true, "tap_tolerance": 15, "tooltip": null, "top": 9007199254740991.0, "touch_zoom": true, "west": 0.0, "window_url": "", "world_copy_jump": false, "zoom": 12.0, "zoom_animation_threshold": 4, "zoom_delta": 1.0, "zoom_snap": 1.0}}, "6f551ba6d30845dcabacd4ad15da536c": {"model_name": "LeafletZoomControlModel", "model_module": "jupyter-leaflet", "model_module_version": "^0.17", "state": {"_model_module": "jupyter-leaflet", "_model_module_version": "^0.17", "_model_name": "LeafletZoomControlModel", "_view_count": null, "_view_module": "jupyter-leaflet", "_view_module_version": "^0.17", "_view_name": "LeafletZoomControlView", "options": ["position", "zoom_in_text", "zoom_in_title", "zoom_out_text", "zoom_out_title"], "position": "topleft", "zoom_in_text": "+", "zoom_in_title": "Zoom in", "zoom_out_text": "-", "zoom_out_title": "Zoom out"}}, "13a45729c25e4ebba0c58556a64bf7db": {"model_name": "LeafletAttributionControlModel", "model_module": "jupyter-leaflet", "model_module_version": "^0.17", "state": {"_model_module": "jupyter-leaflet", "_model_module_version": "^0.17", "_model_name": "LeafletAttributionControlModel", "_view_count": null, "_view_module": "jupyter-leaflet", "_view_module_version": "^0.17", "_view_name": "LeafletAttributionControlView", "options": ["position", "prefix"], "position": "bottomright", "prefix": "ipyleaflet"}}}, "version_major": 2, "version_minor": 0}
</script>



           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../gallery.html" class="btn btn-neutral float-left" title="Example gallery" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="savan.html" class="btn btn-neutral float-right" title="Calibration flights with SAVAN trajectories" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Xavier Olive.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

<!-- Google tag (gtag.js) -->
<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=G-RMZC6Q4BEG"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", "G-RMZC6Q4BEG");
</script>



</body>
</html>