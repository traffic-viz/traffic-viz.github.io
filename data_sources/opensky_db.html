<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>How to access ADS-B data from OpenSky history database? &mdash; traffic 2.10.1.dev5 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css?v=572af1d6" />
      <link rel="stylesheet" type="text/css" href="../_static/thebelab.css" />
      <link rel="stylesheet" type="text/css" href="../_static/main_stylesheet.css?v=c6a171fe" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=288605c2"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/thebelab-helper.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-lite@4"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How to decode ADS-B and Mode S data?" href="decode.html" />
    <link rel="prev" title="How to access ADS-B data from OpenSky live API?" href="opensky_rest.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            traffic
          </a>
              <div class="version">
                2.10.1.dev5
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../user_guide.html">User guide</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../user_guide.html#sources-of-data">Sources of data</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="samples.html">How to access sample trajectories?</a></li>
<li class="toctree-l3"><a class="reference internal" href="airports.html">How to access airport information?</a></li>
<li class="toctree-l3"><a class="reference internal" href="aircraft.html">How to access aircraft information?</a></li>
<li class="toctree-l3"><a class="reference internal" href="navigation.html">How to access beacons and airways information?</a></li>
<li class="toctree-l3"><a class="reference internal" href="airspaces.html">How to access airspace information?</a></li>
<li class="toctree-l3"><a class="reference internal" href="flightplans.html">How to access flight plan information?</a></li>
<li class="toctree-l3"><a class="reference internal" href="opensky_rest.html">How to access ADS-B data from OpenSky live API?</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">How to access ADS-B data from OpenSky history database?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#historical-traffic-data">Historical traffic data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#extended-mode-s-ehs">Extended Mode-S (EHS)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#flight-list-by-airport">Flight list by airport</a></li>
<li class="toctree-l4"><a class="reference internal" href="#requests-for-raw-data">Requests for raw data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="decode.html">How to decode ADS-B and Mode S data?</a></li>
<li class="toctree-l3"><a class="reference internal" href="eurocontrol.html">How to configure EUROCONTROL data files?</a></li>
<li class="toctree-l3"><a class="reference internal" href="export.html">How to export and store trajectory and airspace data?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#data-visualisation">Data visualisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#good-practices">Good practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#navigation-events">Navigation events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#statistical-analysis">Statistical analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#standalone-applications">Standalone applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../gallery.html">Example gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications.html">Publications</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">traffic</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../user_guide.html">User guide</a></li>
      <li class="breadcrumb-item active">How to access ADS-B data from OpenSky history database?</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/data_sources/opensky_db.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="how-to-access-ads-b-data-from-opensky-history-database">
<h1>How to access ADS-B data from OpenSky history database?<a class="headerlink" href="#how-to-access-ads-b-data-from-opensky-history-database" title="Link to this heading"></a></h1>
<p>For more advanced request or a dig in further history, you may be
eligible for an direct access to the history database through their
<a class="reference external" href="https://opensky-network.org/impala-guide">Impala</a> shell or Trino database.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>OpenSky data are subject to particular <a class="reference external" href="https://opensky-network.org/about/terms-of-use">terms of use</a>. In particular, if you plan
to use data for commercial purposes, you should mention it when you ask for
access</p>
</div>
<p>Provided functions are here to help:</p>
<ul class="simple">
<li><p>build appropriate and efficient requests without any SQL knowledge;</p></li>
<li><p>split requests efficiently and store intermediary results in cache
files;</p></li>
<li><p>parse results with pandas and wrap results in appropriate data structures.</p></li>
</ul>
<p>The first thing to do is to put your credentials in your configuration
file. Edit the following lines of your configuration file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">opensky</span><span class="p">]</span>
<span class="n">username</span> <span class="o">=</span>
<span class="n">password</span> <span class="o">=</span>
</pre></div>
</div>
<p>You can check the path to your configuration file here. The path is
different according to OS versions so do not assume anything and check
the contents of the variable.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">traffic</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">traffic</span><span class="o">.</span><span class="n">config_file</span>
<span class="go">PosixPath(&#39;/home/xo/.config/traffic/traffic.conf&#39;)</span>
</pre></div>
</div>
<section id="historical-traffic-data">
<h2>Historical traffic data<a class="headerlink" href="#historical-traffic-data" title="Link to this heading"></a></h2>
<dl class="py method">
<dt class="sig sig-object py" id="traffic.data.adsb.opensky.OpenSky.history">
<span class="sig-prename descclassname"><span class="pre">OpenSky.</span></span><span class="sig-name descname"><span class="pre">history</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callsign</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">icao24</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">serials</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bounds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">departure_airport</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrival_airport</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">airport</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cached</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selected_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_flight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#traffic.data.adsb.opensky.OpenSky.history" title="Link to this definition"></a></dt>
<dd><p>Get Traffic from the OpenSky Trino database.</p>
<p>You may pass requests based on time ranges, callsigns, aircraft, areas,
serial numbers for receivers, or airports of departure or arrival.</p>
<p>The method builds appropriate SQL requests, caches results and formats
data into a proper pandas DataFrame. Requests are split by hour (by
default) in case the connection fails.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<span class="sphinx_autodoc_typehints-type">timelike</span>) – a string (default to UTC), epoch or datetime (native
Python or pandas)</p></li>
<li><p><strong>stop</strong> (<span class="sphinx_autodoc_typehints-type">None | timelike</span>) – a string (default to UTC), epoch or datetime (native Python
or pandas), <em>by default, one day after start</em></p></li>
<li><p><strong>date_delta</strong> – a timedelta representing how to split the requests,
<em>by default: per hour</em></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type">None | Flight | Traffic</span></p>
</dd>
</dl>
<p>More arguments to filter resulting data:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>callsign</strong> (<span class="sphinx_autodoc_typehints-type">None | str | list[str]</span>) – a string or a list of strings (wildcards
accepted, _ for any character, % for any sequence of characters);</p></li>
<li><p><strong>icao24</strong> (<span class="sphinx_autodoc_typehints-type">None | str | list[str]</span>) – a string or a list of strings identifying the transponder
code of the aircraft;</p></li>
<li><p><strong>serials</strong> (<span class="sphinx_autodoc_typehints-type">None | int | Iterable[int]</span>) – an integer or a list of integers identifying the sensors
receiving the data;</p></li>
<li><p><strong>bounds</strong> (<span class="sphinx_autodoc_typehints-type">None | str | HasBounds | tuple[float, float, float, float]</span>) – sets a geographical footprint. Either an <strong>airspace or
shapely shape</strong> (requires the bounds attribute); or a <strong>tuple of
float</strong> (west, south, east, north);</p></li>
<li><p><strong>selected_columns</strong> (<span class="sphinx_autodoc_typehints-type">tuple[InstrumentedAttribute[Any] | str, …]</span>) – specify the columns you want to retrieve. When
empty, use all columns of the StateVectorsData4 table. You may
escape column names as str. <strong>Always</strong> escape names from the
FlightsData4 table.</p></li>
</ul>
</dd>
</dl>
<p><strong>Airports</strong></p>
<p>The following options build more complicated requests by merging
information from two tables in the Trino database, resp.
<code class="docutils literal notranslate"><span class="pre">state_vectors_data4</span></code> and <code class="docutils literal notranslate"><span class="pre">flights_data4</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>departure_airport</strong> (<span class="sphinx_autodoc_typehints-type">None | str</span>) – a string for the ICAO identifier of the
airport. Selects flights departing from the airport between the two
timestamps;</p></li>
<li><p><strong>arrival_airport</strong> (<span class="sphinx_autodoc_typehints-type">None | str</span>) – a string for the ICAO identifier of the airport.
Selects flights arriving at the airport between the two timestamps;</p></li>
<li><p><strong>airport</strong> (<span class="sphinx_autodoc_typehints-type">None | str</span>) – a string for the ICAO identifier of the airport. Selects
flights departing from or arriving at the airport between the two
timestamps;</p></li>
<li><p><strong>time_buffer</strong> (<span class="sphinx_autodoc_typehints-type">None | str | pd.Timedelta</span>) – (default: None) time buffer used to extend time
bounds for flights in the OpenSky flight tables: requests will get
flights between <code class="docutils literal notranslate"><span class="pre">start</span> <span class="pre">-</span> <span class="pre">time_buffer</span></code> and <code class="docutils literal notranslate"><span class="pre">stop</span> <span class="pre">+</span> <span class="pre">time_buffer</span></code>.
If no airport is specified, the parameter is ignored.</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul class="simple">
<li><p>See <code class="xref py py-meth docutils literal notranslate"><span class="pre">pyopensky.trino.flightlist()</span></code> if you do not need any
trajectory information.</p></li>
<li><p>If both departure_airport and arrival_airport are set, requested
timestamps match the arrival time;</p></li>
<li><p>If airport is set, departure_airport and arrival_airport cannot be
specified (a RuntimeException is raised).</p></li>
</ul>
</div>
<p><strong>Useful options for debug</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cached</strong> (<span class="sphinx_autodoc_typehints-type">bool</span>) – (default: True) switch to False to force a new request to
the database regardless of the cached files. This option also
deletes previous cache files;</p></li>
<li><p><strong>compress</strong> (<span class="sphinx_autodoc_typehints-type">bool</span>) – (default: False) compress cache files. Reduces disk
space occupied at the expense of slightly increased time
to load.</p></li>
<li><p><strong>limit</strong> (<span class="sphinx_autodoc_typehints-type">None | int</span>) – maximum number of records requested, LIMIT keyword in SQL.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<section id="examples-of-requests">
<h3>Examples of requests<a class="headerlink" href="#examples-of-requests" title="Link to this heading"></a></h3>
<p>First, the <cite>opensky</cite> instance parses your configuration file upon import:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">traffic.data</span> <span class="kn">import</span> <span class="n">opensky</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>Then you may send requests:</p>
<ul>
<li><p>based on callsign:</p>
<blockquote>
<div><div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">flight</span> <span class="o">=</span> <span class="n">opensky</span><span class="o">.</span><span class="n">history</span><span class="p">(</span>
    <span class="s2">&quot;2017-02-05 15:45&quot;</span><span class="p">,</span>
    <span class="n">stop</span><span class="o">=</span><span class="s2">&quot;2017-02-05 16:45&quot;</span><span class="p">,</span>
    <span class="n">callsign</span><span class="o">=</span><span class="s2">&quot;EZY158T&quot;</span><span class="p">,</span>
    <span class="c1"># returns a Flight instead of a Traffic</span>
    <span class="n">return_flight</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
<span class="n">flight</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><h4><b>Flight</b></h4><ul><li><b>callsign:</b> EZY158T   </li><li><b>aircraft:</b> <code>406d95</code> · 🇬🇧 G-EZOP (A320)</li><li><b>start:</b> 2017-02-05 15:45:00+00:00</li><li><b>stop:</b> 2017-02-05 16:45:00+00:00</li><li><b>duration:</b> 0 days 01:00:00</li><li><b>sampling rate:</b> 1 second(s)</li></ul><div style="white-space: nowrap"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="300" height="300" viewBox="-41747.37827086695 -102149.70201914354 83674.98972912547 204391.67833677543" preserveAspectRatio="xMinYMin meet"><g transform="matrix(1,0,0,-1,0,92.27429848833708)"><polyline fill="none" stroke="#66cc99" stroke-width="1362.6111889118363" points="23402.977306423425,94671.91415701057 22485.419268604724,82580.74435589598 21012.452943244007,64380.841728383595 18086.089248047454,27082.14612612224 17939.130903877125,26098.80729656844 17745.197367194847,25290.20475443424 17512.167490090662,24612.993433871085 16744.83172650455,22815.76252586961 16418.08897577979,21751.217437553918 16241.977972567962,20714.13385442165 16196.162795598886,19767.30503703891 16312.777101888101,17894.943690728 16740.58798607315,14015.9669917279 16891.505910118845,12241.921267357746 17741.685196972627,-6436.2479523866 18681.726766907275,-21807.942539142572 19283.764788325847,-30020.81123577069 19462.25966300685,-31251.086275189955 19770.629063818997,-32698.916247266923 21419.712796069532,-38824.085520164845 23915.61031168857,-48744.395395757914 24146.546377740728,-49882.91788491417 24302.48079822493,-51171.191633465976 24355.95846603361,-52800.361204766836 24322.04504031154,-55584.0956415815 24182.780432427415,-57018.94356275688 23887.326209908853,-59060.818073893344 23718.625219445785,-60011.34536886487 23453.878804904336,-61075.308509268994 22116.569461199124,-65397.98112320085 21853.678210070106,-66009.27370601596 21248.769134362392,-67009.40706598051 18723.66173453484,-70451.38979784376 18332.879588207776,-70819.70683621048 17915.342792386815,-71100.1437981023 17407.563292976123,-71308.37869386893 16878.269902102078,-71397.66723118114 16226.944101486502,-71394.11101260081 14638.035397106736,-71242.61885589633 8219.37361448973,-70451.91518074075 7223.815587173456,-70272.03838772139 6048.474129936031,-69867.09846763898 2410.5714862479376,-68361.7711821066 2066.477330256489,-68165.3394095846 1569.9838169847653,-67779.2762624869 886.0690542336343,-67079.41617218366 -77.02539400028971,-65920.8735537074 -2547.9784728962277,-62672.48806443058 -12147.697155233722,-49925.83501370688 -15215.750708184858,-45772.11009668548 -16489.887658005893,-44214.59720796827 -18917.100136223387,-41489.95986472723 -19103.074014440277,-41191.30613678024 -19325.76233770352,-40624.93742296185 -19408.440546941198,-39974.7415114011 -19359.204036447507,-39440.28176407468 -19235.57394282697,-38942.67727825147 -18976.698136285027,-38365.45248940518 -18640.620949104225,-37855.852588713366 -18231.124859617656,-37405.40687704489 -17815.09078955549,-37054.442894804386 -17296.865200360873,-36725.100602006096 -15805.9622795209,-36052.391109928656 -9669.934815063794,-33621.40332555542 -8929.133949702513,-33445.61795016758 -8275.933479833951,-33380.339287269926 -7468.589430094851,-33421.99020049915 -6846.450400238495,-33539.65319870686 -6273.943834175902,-33723.76780679544 -5730.846195324282,-33967.98448963348 -5170.517610724725,-34309.246161948904 -4658.171386447695,-34697.58529215213 729.5813038971821,-39546.05650196677 1429.6493137546192,-40221.672838300656 2058.0311913902456,-40911.37556556382 8384.466238945652,-48370.12316512597 8859.475574382543,-48984.96112448495 9386.433228751084,-49818.40552746676 9804.89877600691,-50582.48225281429 12337.152280867864,-55450.80631939368 12714.131500806341,-56453.56251142165 13166.265019146864,-58117.96466593239 15693.037649777505,-68015.29920235481 15803.030637981887,-68620.28590126199 15824.615509639134,-69001.69196715794 15809.245216800375,-69424.47732456542 15707.892262075684,-69932.72157523294 15594.151877041124,-70257.72142011013 15342.614889292732,-70742.25700927677 14845.027896397556,-71459.39624095519 13016.373516025733,-73895.45626938716 12577.415592770043,-74338.78011350648 12398.88614866929,-74464.28139653806 11970.127910045692,-74661.60758744816 11532.87056125591,-74732.28825263193 11170.584120350506,-74697.30247264757 10687.85661213032,-74539.65136395558 5367.552360362518,-71902.10104381226 4746.558613137769,-71485.51681873252 4238.2830302892635,-71019.40861331407 3644.2593976739195,-70331.67703831803 2547.4165478447007,-68928.43095396594 -11786.771437494008,-49901.05263155226 -13313.651905052719,-47761.88297520684 -14125.859558571025,-46778.52703606969 -14547.759595321713,-46482.60390556231 -15037.609930564999,-46305.29879916474 -15870.726229206306,-46143.00939680049 -17658.421827255184,-45916.075691197635 -19142.090943300977,-45799.548663754664 -21155.137173459236,-45714.47606432008 -24589.018904597167,-45692.312435071726 -28827.017859790692,-45474.66606310416 -29569.107437628987,-45517.18390280457 -30410.096675856563,-45777.88599494878 -31411.766870558233,-46225.92416145963 -32295.549722952095,-46776.11486828622 -32999.48797217585,-47403.38026414529 -33441.20723855743,-47960.68438039066 -33712.62330327177,-48414.508877641456 -33904.757699436064,-48837.6906725858 -34097.69631063427,-49508.718976820724 -34158.37146734961,-49922.65094897542 -34177.31611024564,-50527.753282176214 -34106.57122718087,-51143.660339646645 -34003.10355615074,-51558.00048059912 -33842.38769729057,-52017.63174969639 -33516.00017024496,-52746.63978170478 -30837.643542486403,-57754.64826057121 -29649.32351926992,-60063.8772788574 -21098.021522562387,-77801.18351585336 -19998.300253187263,-80409.33827847097 -17084.94917836412,-87803.0849363444 -16792.266735015924,-88742.88027536267 -16695.569434467587,-89475.4683937589 -16696.965661990933,-90034.89456679739 -16795.00933509862,-90720.78933250927 -17025.219090877526,-91449.44504748657 -17254.878502173407,-91945.35782371568 -17746.497926804226,-92686.92574004797 -18069.165228587295,-93047.14469794791 -18635.030076655785,-93544.9359064055 -19209.88186079237,-93915.68397965045 -19919.98816835518,-94247.19241964137 -20672.7252545795,-94475.0570630087 -21301.509782389094,-94568.42003564295 -21937.704723379673,-94579.63985852223 -22569.799802425885,-94510.30472497072 -23419.19344840941,-94284.99777584538 -23981.542421321148,-94039.9297471467 -24412.735176328042,-93789.86327251654 -24857.837431059143,-93467.8280564863 -25258.510158159577,-93104.29689596305 -25509.05899988957,-92778.81112634776 -25673.74993687606,-92427.26875754341 -25764.404234250862,-92036.95941000922 -25780.472508950574,-91847.08873201882 -25724.220616891063,-91256.15597658337 -25579.064121164465,-90796.41164653076 -25286.847434822375,-90272.39933905545 -24927.602386533552,-89842.06324370572 -24594.32146257715,-89542.6345659494 -24266.74523415257,-89309.88651147917 -23778.32382066133,-89047.18148513683 -23219.63276419619,-88839.68010766714 -22560.819143139935,-88697.11995075003 -21635.284798641937,-88647.59621375946 -20629.541129065507,-88727.06012499199 -14268.625875356236,-89552.28549940028 -5541.178857363303,-90612.86295930757 2447.194101737922,-91764.07405615652 3247.6471540264147,-91842.69063129305 4200.743092694733,-91839.48807043154 5118.913620376115,-91716.79259047516 11580.54275530492,-90315.25026263617 23268.430635008626,-87925.02105014688 34357.54929763721,-85598.7937296401" opacity="0.8" /></g></svg></div></div></div>
</div>
</div></blockquote>
</li>
<li><p>based on bounding box:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># two hours of traffic over LFBB FIR</span>
<span class="n">t_lfbb</span> <span class="o">=</span> <span class="n">opensky</span><span class="o">.</span><span class="n">history</span><span class="p">(</span>
    <span class="s2">&quot;2018-10-01 11:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;2018-10-01 13:00&quot;</span><span class="p">,</span>
    <span class="n">bounds</span><span class="o">=</span><span class="n">eurofirs</span><span class="p">[</span><span class="s1">&#39;LFBB&#39;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>based on airports and callsigns (with wildcard):</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Airbus test flights from and to Toulouse airport</span>
<span class="n">t_aib</span> <span class="o">=</span> <span class="n">opensky</span><span class="o">.</span><span class="n">history</span><span class="p">(</span>
    <span class="s2">&quot;2019-11-01 09:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;2019-11-01 12:00&quot;</span><span class="p">,</span>
    <span class="n">departure_airport</span><span class="o">=</span><span class="s2">&quot;LFBO&quot;</span><span class="p">,</span>
    <span class="n">arrival_airport</span><span class="o">=</span><span class="s2">&quot;LFBO&quot;</span><span class="p">,</span>
    <span class="n">callsign</span><span class="o">=</span><span class="s2">&quot;AIB%&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>based on (own?) receiver’s identifier:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t_sensor</span> <span class="o">=</span> <span class="n">opensky</span><span class="o">.</span><span class="n">history</span><span class="p">(</span>
    <span class="s2">&quot;2019-11-11 10:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;2019-11-11 12:00&quot;</span><span class="p">,</span>
    <span class="n">serials</span><span class="o">=</span><span class="mi">1433801924</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
</section>
<section id="extended-mode-s-ehs">
<h2>Extended Mode-S (EHS)<a class="headerlink" href="#extended-mode-s-ehs" title="Link to this heading"></a></h2>
<p>EHS messages are not automatically decoded for you in the OpenSky
Database but you may access them and decode them from your computer.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Some examples here may be outdated</strong>. To our knowledge at this time, only
EHS data <strong>after January 1st 2020</strong> are available!</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Flight.query_ehs()</span></code> messages also takes a dataframe argument to avoid
making possibly numerous requests to the Impala database.</div>
<div class="line">Consider using <a class="reference external" href="#traffic.data.adsb.opensky.OpenSky.extended">opensky.extended()</a> and request all
necessary data, then pass the resulting dataframe as an argument.</div>
</div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="traffic.data.adsb.opensky.OpenSky.extended">
<span class="sig-prename descclassname"><span class="pre">OpenSky.</span></span><span class="sig-name descname"><span class="pre">extended</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">icao24</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">serials</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bounds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callsign</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">departure_airport</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_after_departure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrival_airport</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_before_arrival</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">airport</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cached</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#traffic.data.adsb.opensky.OpenSky.extended" title="Link to this definition"></a></dt>
<dd><p>Get raw message from the OpenSky Trino database.</p>
<p>You may pass requests based on time ranges, callsigns, aircraft, areas,
serial numbers for receivers, or airports of departure or arrival.</p>
<p>The method builds appropriate SQL requests, caches results and formats
data into a proper pandas DataFrame. Requests are split by hour (by
default) in case the connection fails.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<span class="sphinx_autodoc_typehints-type">timelike</span>) – a string (default to UTC), epoch or datetime (native
Python or pandas)</p></li>
<li><p><strong>stop</strong> (<span class="sphinx_autodoc_typehints-type">None | timelike</span>) – a string (default to UTC), epoch or datetime (native Python
or pandas), <em>by default, one day after start</em></p></li>
<li><p><strong>date_delta</strong> – a timedelta representing how to split the requests,
<em>by default: per hour</em></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type">None | RawData</span></p>
</dd>
</dl>
<p>More arguments to filter resulting data:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>callsign</strong> (<span class="sphinx_autodoc_typehints-type">None | str | list[str]</span>) – a string or a list of strings (wildcards
accepted, _ for any character, % for any sequence of characters);</p></li>
<li><p><strong>icao24</strong> (<span class="sphinx_autodoc_typehints-type">None | str | list[str]</span>) – a string or a list of strings identifying the transponder
code of the aircraft;</p></li>
<li><p><strong>serials</strong> (<span class="sphinx_autodoc_typehints-type">None | int | Iterable[int]</span>) – an integer or a list of integers identifying the sensors
receiving the data;</p></li>
<li><p><strong>bounds</strong> (<span class="sphinx_autodoc_typehints-type">None | HasBounds | tuple[float, float, float, float]</span>) – sets a geographical footprint. Either an <strong>airspace or
shapely shape</strong> (requires the bounds attribute); or a <strong>tuple of
float</strong> (west, south, east, north);</p></li>
</ul>
</dd>
</dl>
<p><strong>Airports</strong></p>
<p>The following options build more complicated requests by merging
information from two tables in the Trino database, resp.
<code class="docutils literal notranslate"><span class="pre">rollcall_replies_data4</span></code> and <code class="docutils literal notranslate"><span class="pre">flights_data4</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>departure_airport</strong> (<span class="sphinx_autodoc_typehints-type">None | str</span>) – a string for the ICAO identifier of the
airport. Selects flights departing from the airport between the two
timestamps;</p></li>
<li><p><strong>arrival_airport</strong> (<span class="sphinx_autodoc_typehints-type">None | str</span>) – a string for the ICAO identifier of the airport.
Selects flights arriving at the airport between the two timestamps;</p></li>
<li><p><strong>airport</strong> (<span class="sphinx_autodoc_typehints-type">None | str</span>) – a string for the ICAO identifier of the airport. Selects
flights departing from or arriving at the airport between the two
timestamps;</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul class="simple">
<li><p>If both departure_airport and arrival_airport are set, requested
timestamps match the arrival time;</p></li>
<li><p>If airport is set, departure_airport and arrival_airport cannot be
specified (a RuntimeException is raised).</p></li>
<li><p>It is not possible at the moment to filter both on airports and on
geographical bounds (help welcome!).</p></li>
</ul>
</div>
<p><strong>Useful options for debug</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cached</strong> (<span class="sphinx_autodoc_typehints-type">bool</span>) – (default: True) switch to False to force a new request to
the database regardless of the cached files. This option also
deletes previous cache files;</p></li>
<li><p><strong>compress</strong> (<span class="sphinx_autodoc_typehints-type">bool</span>) – (default: False) compress cache files. Reduces disk
space occupied at the expense of slightly increased time
to load.</p></li>
<li><p><strong>limit</strong> (<span class="sphinx_autodoc_typehints-type">None | int</span>) – maximum number of records requested, LIMIT keyword in SQL.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<section id="id1">
<h3>Examples of requests<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<ul>
<li><p>based on transponder identifier (icao24):</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">traffic.data.samples</span> <span class="kn">import</span> <span class="n">belevingsvlucht</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">opensky</span><span class="o">.</span><span class="n">extended</span><span class="p">(</span>
    <span class="n">belevingsvlucht</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
    <span class="n">belevingsvlucht</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span>
    <span class="n">icao24</span><span class="o">=</span><span class="n">belevingsvlucht</span><span class="o">.</span><span class="n">icao24</span>
<span class="p">)</span>

<span class="n">enriched</span> <span class="o">=</span> <span class="n">belevingsvlucht</span><span class="o">.</span><span class="n">query_ehs</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>based on geographical bounds:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">traffic.data</span> <span class="kn">import</span> <span class="n">eurofirs</span>
<span class="kn">from</span> <span class="nn">traffic.data.samples</span> <span class="kn">import</span> <span class="n">switzerland</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">opensky</span><span class="o">.</span><span class="n">extended</span><span class="p">(</span>
    <span class="n">switzerland</span><span class="o">.</span><span class="n">start_time</span><span class="p">,</span>
    <span class="n">switzerland</span><span class="o">.</span><span class="n">end_time</span><span class="p">,</span>
    <span class="n">bounds</span><span class="o">=</span><span class="n">eurofirs</span><span class="p">[</span><span class="s1">&#39;LSAS&#39;</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">enriched_ch</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">switzerland</span>
    <span class="o">.</span><span class="n">filter</span><span class="p">()</span>
    <span class="o">.</span><span class="n">query_ehs</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;1s&#39;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="n">desc</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">max_workers</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>based on airports, together with traffic:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">schiphol</span> <span class="o">=</span> <span class="n">opensky</span><span class="o">.</span><span class="n">history</span><span class="p">(</span>
    <span class="s2">&quot;2019-11-11 12:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;2019-11-11 14:00&quot;</span><span class="p">,</span>
    <span class="n">airport</span><span class="o">=</span><span class="s2">&quot;EHAM&quot;</span>
<span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">opensky</span><span class="o">.</span><span class="n">extended</span><span class="p">(</span>
    <span class="s2">&quot;2019-11-11 12:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;2019-11-11 14:00&quot;</span><span class="p">,</span>
    <span class="n">airport</span><span class="o">=</span><span class="s2">&quot;EHAM&quot;</span>
<span class="p">)</span>

<span class="n">enriched_eham</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">schiphol</span>
    <span class="o">.</span><span class="n">filter</span><span class="p">()</span>
    <span class="o">.</span><span class="n">query_ehs</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;1s&#39;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="n">desc</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">max_workers</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
</section>
<section id="flight-list-by-airport">
<h2>Flight list by airport<a class="headerlink" href="#flight-list-by-airport" title="Link to this heading"></a></h2>
<dl class="py method">
<dt class="sig sig-object py" id="traffic.data.adsb.opensky.OpenSky.flightlist">
<span class="sig-prename descclassname"><span class="pre">OpenSky.</span></span><span class="sig-name descname"><span class="pre">flightlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">departure_airport</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrival_airport</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">airport</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callsign</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">icao24</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cached</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#traffic.data.adsb.opensky.OpenSky.flightlist" title="Link to this definition"></a></dt>
<dd><p>Lists flights departing or arriving at a given airport.</p>
<p>You may pass requests based on time ranges, callsigns, aircraft, areas,
serial numbers for receivers, or airports of departure or arrival.</p>
<p>The method builds appropriate SQL requests, caches results and formats
data into a proper pandas DataFrame. Requests are split by hour (by
default) in case the connection fails.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<span class="sphinx_autodoc_typehints-type">timelike</span>) – a string (default to UTC), epoch or datetime (native
Python or pandas)</p></li>
<li><p><strong>stop</strong> (<span class="sphinx_autodoc_typehints-type">None | timelike</span>) – a string (default to UTC), epoch or datetime (native Python
or pandas), <em>by default, one day after start</em></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type">None | pd.DataFrame</span></p>
</dd>
</dl>
<p>More arguments to filter resulting data:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>departure_airport</strong> (<span class="sphinx_autodoc_typehints-type">None | str | list[str]</span>) – a string for the ICAO identifier of the
airport. Selects flights departing from the airport between the two
timestamps;</p></li>
<li><p><strong>arrival_airport</strong> (<span class="sphinx_autodoc_typehints-type">None | str | list[str]</span>) – a string for the ICAO identifier of the airport.
Selects flights arriving at the airport between the two timestamps;</p></li>
<li><p><strong>airport</strong> (<span class="sphinx_autodoc_typehints-type">None | str | list[str]</span>) – a string for the ICAO identifier of the airport. Selects
flights departing from or arriving at the airport between the two
timestamps;</p></li>
<li><p><strong>callsign</strong> (<span class="sphinx_autodoc_typehints-type">None | str | list[str]</span>) – a string or a list of strings (wildcards
accepted, _ for any character, % for any sequence of characters);</p></li>
<li><p><strong>icao24</strong> (<span class="sphinx_autodoc_typehints-type">None | str | list[str]</span>) – a string or a list of strings identifying the transponder
code of the aircraft;</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul class="simple">
<li><p>If both departure_airport and arrival_airport are set, requested
timestamps match the arrival time;</p></li>
<li><p>If airport is set, <code class="docutils literal notranslate"><span class="pre">departure_airport</span></code> and <code class="docutils literal notranslate"><span class="pre">arrival_airport</span></code>
cannot be specified (a RuntimeException is raised).</p></li>
</ul>
</div>
<p><strong>Useful options for debug</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cached</strong> (<span class="sphinx_autodoc_typehints-type">bool</span>) – (default: True) switch to False to force a new request to
the database regardless of the cached files. This option also
deletes previous cache files;</p></li>
<li><p><strong>compress</strong> (<span class="sphinx_autodoc_typehints-type">bool</span>) – (default: False) compress cache files. Reduces disk
space occupied at the expense of slightly increased time
to load.</p></li>
<li><p><strong>limit</strong> (<span class="sphinx_autodoc_typehints-type">None | int</span>) – maximum number of records requested, LIMIT keyword in SQL.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="requests-for-raw-data">
<h2>Requests for raw data<a class="headerlink" href="#requests-for-raw-data" title="Link to this heading"></a></h2>
<dl class="py method">
<dt class="sig sig-object py" id="traffic.data.adsb.opensky.OpenSky.rawdata">
<span class="sig-prename descclassname"><span class="pre">OpenSky.</span></span><span class="sig-name descname"><span class="pre">rawdata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">icao24</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">serials</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bounds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callsign</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">departure_airport</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_after_departure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrival_airport</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_before_arrival</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">airport</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cached</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#traffic.data.adsb.opensky.OpenSky.rawdata" title="Link to this definition"></a></dt>
<dd><p>Get raw message from the OpenSky Trino database.</p>
<p>You may pass requests based on time ranges, callsigns, aircraft, areas,
serial numbers for receivers, or airports of departure or arrival.</p>
<p>The method builds appropriate SQL requests, caches results and formats
data into a proper pandas DataFrame. Requests are split by hour (by
default) in case the connection fails.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<span class="sphinx_autodoc_typehints-type">timelike</span>) – a string (default to UTC), epoch or datetime (native
Python or pandas)</p></li>
<li><p><strong>stop</strong> (<span class="sphinx_autodoc_typehints-type">None | timelike</span>) – a string (default to UTC), epoch or datetime (native Python
or pandas), <em>by default, one day after start</em></p></li>
<li><p><strong>date_delta</strong> – a timedelta representing how to split the requests,
<em>by default: per hour</em></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type">None | RawData</span></p>
</dd>
</dl>
<p>More arguments to filter resulting data:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>callsign</strong> (<span class="sphinx_autodoc_typehints-type">None | str | list[str]</span>) – a string or a list of strings (wildcards
accepted, _ for any character, % for any sequence of characters);</p></li>
<li><p><strong>icao24</strong> (<span class="sphinx_autodoc_typehints-type">None | str | list[str]</span>) – a string or a list of strings identifying the transponder
code of the aircraft;</p></li>
<li><p><strong>serials</strong> (<span class="sphinx_autodoc_typehints-type">None | int | Iterable[int]</span>) – an integer or a list of integers identifying the sensors
receiving the data;</p></li>
<li><p><strong>bounds</strong> (<span class="sphinx_autodoc_typehints-type">None | HasBounds | tuple[float, float, float, float]</span>) – sets a geographical footprint. Either an <strong>airspace or
shapely shape</strong> (requires the bounds attribute); or a <strong>tuple of
float</strong> (west, south, east, north);</p></li>
</ul>
</dd>
</dl>
<p><strong>Airports</strong></p>
<p>The following options build more complicated requests by merging
information from two tables in the Trino database, resp.
<code class="docutils literal notranslate"><span class="pre">rollcall_replies_data4</span></code> and <code class="docutils literal notranslate"><span class="pre">flights_data4</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>departure_airport</strong> (<span class="sphinx_autodoc_typehints-type">None | str</span>) – a string for the ICAO identifier of the
airport. Selects flights departing from the airport between the two
timestamps;</p></li>
<li><p><strong>arrival_airport</strong> (<span class="sphinx_autodoc_typehints-type">None | str</span>) – a string for the ICAO identifier of the airport.
Selects flights arriving at the airport between the two timestamps;</p></li>
<li><p><strong>airport</strong> (<span class="sphinx_autodoc_typehints-type">None | str</span>) – a string for the ICAO identifier of the airport. Selects
flights departing from or arriving at the airport between the two
timestamps;</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul class="simple">
<li><p>If both departure_airport and arrival_airport are set, requested
timestamps match the arrival time;</p></li>
<li><p>If airport is set, departure_airport and arrival_airport cannot be
specified (a RuntimeException is raised).</p></li>
<li><p>It is not possible at the moment to filter both on airports and on
geographical bounds (help welcome!).</p></li>
</ul>
</div>
<p><strong>Useful options for debug</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cached</strong> (<span class="sphinx_autodoc_typehints-type">bool</span>) – (default: True) switch to False to force a new request to
the database regardless of the cached files. This option also
deletes previous cache files;</p></li>
<li><p><strong>compress</strong> (<span class="sphinx_autodoc_typehints-type">bool</span>) – (default: False) compress cache files. Reduces disk
space occupied at the expense of slightly increased time
to load.</p></li>
<li><p><strong>limit</strong> (<span class="sphinx_autodoc_typehints-type">None | int</span>) – maximum number of records requested, LIMIT keyword in SQL.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="opensky_rest.html" class="btn btn-neutral float-left" title="How to access ADS-B data from OpenSky live API?" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="decode.html" class="btn btn-neutral float-right" title="How to decode ADS-B and Mode S data?" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Xavier Olive.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

<!-- Google tag (gtag.js) -->
<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=G-RMZC6Q4BEG"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", "G-RMZC6Q4BEG");
</script>



</body>
</html>