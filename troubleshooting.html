

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Troubleshooting &mdash; traffic  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/jupyter-sphinx.css" type="text/css" />
  <link rel="stylesheet" href="_static/thebelab.css" type="text/css" />
  <link rel="stylesheet" href="_static/main_stylesheet.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/thebelab-helper.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-lite@4"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://unpkg.com/@jupyter-widgets/html-manager/dist/embed-amd.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Example gallery" href="gallery.html" />
    <link rel="prev" title="How to run traffic in a Docker container?" href="docker.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> traffic
          

          
            
            <img src="_static/logo_traffic.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="user_guide.html">User guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="user_guide.html#sources-of-data">Sources of data</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_guide.html#navigation-events">Navigation events</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_guide.html#statistics">Statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_guide.html#extend-the-library">Extend the library</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_guide.html#standalone-applications">Standalone applications</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="user_guide.html#troubleshooting">Troubleshooting</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Troubleshooting</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gallery.html">Example gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_reference.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">traffic</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="user_guide.html">User guide</a> &raquo;</li>
        
      <li>Troubleshooting</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/troubleshooting.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="troubleshooting">
<h1>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h1>
<p>The following reported problems are not about the traffic library per
se. Some are related to limitations set by dependencies.</p>
<ul>
<li><p><strong>Installation is really slow</strong>, <strong>conda stalls on the resolution process</strong></p>
<p>Before filing a bug report, did you try:</p>
<ul>
<li><p>to start the installation from a fresh conda environment?</p></li>
<li><p>to disable the <code class="docutils literal notranslate"><span class="pre">channel_priority</span></code> option with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda config --set channel_priority disabled
</pre></div>
</div>
</li>
<li><p>to run traffic with the provided <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> <a class="reference external" href="docker.html">(documentation)</a></p></li>
</ul>
</li>
<li><p><strong>I want to know more about Eurocontrol NM files</strong></p></li>
</ul>
<p>We download these files from Eurocontrol <a class="reference external" href="https://www.eurocontrol.int/ddr">Network Manager Demand Data Repository
(DDR)</a> under Dataset Files &gt; Airspace
Environment Datasets. <a class="reference external" href="https://www.eurocontrol.int/ddr#access-conditions">Access conditions</a> are managed by
EUROCONTROL.</p>
<p>Should you have no such access, basic data are also provided in the library.</p>
<ul class="simple">
<li><p><strong>I want to know more about Eurocontrol AIXM files</strong></p></li>
</ul>
<p>When you import <code class="docutils literal notranslate"><span class="pre">aixm_airspaces</span></code> from <code class="docutils literal notranslate"><span class="pre">traffic.data</span></code>, you need to set a path
to a directory containing AIRAC files. These are XML files following the <a class="reference external" href="http://aixm.aero/">AIXM</a> standard and produced by Eurocontrol. We download these
files from Eurocontrol <a class="reference external" href="https://eurocontrol.int/service/network-manager-business-business-b2b-web-services">Network Manager B2B web services</a>.
You have to own a B2B certificate granted by EUROCONTROL to get access to this
data.</p>
<ul class="simple">
<li><p><strong>What does AIRAC mean?</strong></p></li>
</ul>
<p>Aeronautical Information Publications are updated every 28 days according to
fixed calendar. This cycle is known as AIRAC (Aeronautical Information
Regulation And Control) cycle.</p>
<ul class="simple">
<li><p><strong>I queried data from the OpenSky Impala shell but it returns None</strong></p></li>
</ul>
<p>Please be aware that data requested is limited by the coverage and the storage
capacity on OpenSky side. If your query returns None, it usually means that
OpenSky returned empty results.</p>
<p>This can be due to:</p>
<ul class="simple">
<li><p>the temporal extent of your query: try a similar request on a more recent day
(e.g. January 1st of the current year);</p></li>
<li><p>the coverage of the network at the time of the query: esp. if you ask for
trajectories landing or taking off from a particular airport which is poorly
covered by the network;</p></li>
<li><p>an error in the generated query. Use the <code class="docutils literal notranslate"><span class="pre">cached=False</span></code> parameter and the
<code class="docutils literal notranslate"><span class="pre">INFO</span></code> or <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> logging mode from your logger to manually check the
generated query before it is executed.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>I can’t access resources from the Internet as I am behind a proxy</strong></p></li>
</ul>
<p>All network accesses are made with the <a class="reference external" href="https://requests.readthedocs.io/">requests</a> library (or the <a class="reference external" href="http://www.paramiko.org/">paramiko</a> library for the Impala shell). Usually, if your
environment variables are properly set, you should not encounter any particular
proxy issue. However, there are always situations where it may help to manually
force the proxy settings in the configuration file.</p>
<p>Edit your configuration file (you may find where it is located in
traffic.config_file) and add the following section. Uncomment and edit options
according to your network configuration.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">## This sections contains all the specific options necessary to fit your</span>
<span class="c1">## network configuration (including proxy and ProxyCommand settings)</span>
<span class="p">[</span><span class="n">network</span><span class="p">]</span>

<span class="c1">## input here the arguments you need to pass as is to requests</span>
<span class="c1"># http.proxy = http://proxy.company:8080</span>
<span class="c1"># https.proxy = http://proxy.company:8080</span>
<span class="c1"># http.proxy = socks5h://localhost:1234</span>
<span class="c1"># https.proxy = socks5h://localhost:1234</span>

<span class="c1">## input here the ProxyCommand you need to login to the Impala Shell</span>
<span class="c1">## WARNING:</span>
<span class="c1">##    Do not use %h and %p wildcards.</span>
<span class="c1">##    Write data.opensky-network.org and 2230 explicitly instead</span>
<span class="c1"># ssh.proxycommand = ssh -W data.opensky-network.org:2230 proxy_ip:proxy_port</span>
<span class="c1"># ssh.proxycommand = connect.exe -H proxy_ip:proxy_port data.opensky-network.org 2230</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Python crashes when I try to reproduce plots in the documentation</strong></p></li>
</ul>
<p>(or, “My Jupyter kernel crashes…”)</p>
<p>There must be something wrong with your Cartopy and/or shapely installation.
These libraries strongly depend on the <code class="docutils literal notranslate"><span class="pre">geos</span></code> and <code class="docutils literal notranslate"><span class="pre">proj</span></code> libraries. You
must have shapely and Cartopy versions matching the correct versions of these
libraries.</p>
<p>The problem is sometimes hard to understand, and you may end up fixing it
without really knowing how.</p>
<p>If you don’t know how to install these dependencies, start with a <strong>fresh</strong>
Anaconda distribution and install the following libraries <em>the conda way</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="n">cartopy</span> <span class="n">shapely</span>
</pre></div>
</div>
<p>If it still does not work, try something along:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">uninstall</span> <span class="n">cartopy</span> <span class="n">shapely</span>
<span class="n">pip</span> <span class="n">uninstall</span> <span class="n">cartopy</span> <span class="n">shapely</span>
<span class="c1"># be sure to remove all previous versions before installing again</span>
<span class="n">conda</span> <span class="n">install</span> <span class="n">cartopy</span> <span class="n">shapely</span>
</pre></div>
</div>
<p>If it still does not work, try again with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">uninstall</span> <span class="n">cartopy</span> <span class="n">shapely</span>
<span class="n">pip</span> <span class="n">uninstall</span> <span class="n">cartopy</span> <span class="n">shapely</span>
<span class="c1"># this forces the recompilation of the packages</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">binary</span> <span class="p">:</span><span class="nb">all</span><span class="p">:</span> <span class="n">cartopy</span> <span class="n">shapely</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Widgets do not display in Jupyter Lab or Jupyter Notebook</strong></p></li>
</ul>
<p>After executing a cell, you may see one of the following output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="n">Jupyter</span> <span class="n">Widget</span>
<span class="c1"># or</span>
<span class="n">Error</span> <span class="n">displaying</span> <span class="n">widget</span>
<span class="c1"># or</span>
<span class="n">HBox</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">(</span><span class="n">IntProgress</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">HTML</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)))</span>
<span class="c1"># or</span>
<span class="n">Map</span><span class="p">(</span><span class="n">basemap</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;https://</span><span class="si">{s}</span><span class="s1">.tile.openstreetmap.org/…</span>
</pre></div>
</div>
<p>You will need to activate the widgets extensions:</p>
<ul>
<li><p>with Jupyter Lab:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jupyter</span> <span class="n">labextension</span> <span class="n">install</span> <span class="nd">@jupyter</span><span class="o">-</span><span class="n">widgets</span><span class="o">/</span><span class="n">jupyterlab</span><span class="o">-</span><span class="n">manager</span>
<span class="n">jupyter</span> <span class="n">labextension</span> <span class="n">install</span> <span class="n">jupyter</span><span class="o">-</span><span class="n">leaflet</span>
<span class="n">jupyter</span> <span class="n">labextension</span> <span class="n">install</span> <span class="n">keplergl</span><span class="o">-</span><span class="n">jupyter</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>with Jupyter Notebook:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jupyter</span> <span class="n">nbextension</span> <span class="n">enable</span> <span class="o">--</span><span class="n">py</span> <span class="o">--</span><span class="n">sys</span><span class="o">-</span><span class="n">prefix</span> <span class="n">widgetsnbextension</span>
<span class="n">jupyter</span> <span class="n">nbextension</span> <span class="n">enable</span> <span class="o">--</span><span class="n">py</span> <span class="o">--</span><span class="n">sys</span><span class="o">-</span><span class="n">prefix</span> <span class="n">ipyleaflet</span>
<span class="n">jupyter</span> <span class="n">nbextension</span> <span class="n">enable</span> <span class="o">--</span><span class="n">py</span> <span class="o">--</span><span class="n">sys</span><span class="o">-</span><span class="n">prefix</span> <span class="n">keplergl</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="gallery.html" class="btn btn-neutral float-right" title="Example gallery" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="docker.html" class="btn btn-neutral float-left" title="How to run traffic in a Docker container?" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2018, Xavier Olive.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-412789-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-412789-3');
</script>



</body>
</html>